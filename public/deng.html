<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Dashboard Template for Bootstrap</title>
    <!-- Bootstrap core CSS -->
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="./js/jquery.min.js"></script>
    <script src="./js/Cookie.js"></script>
    <script src="./js/验证url地址栏.js"></script>
     <style>
     .content{
       position: absolute;
       top: 0px;
       left: 0px;
       width: 100%;
       height: 100%;
       background: rgba(0, 0, 0, 0.1);
       display: none;
       z-index: 99999999999;
     }
     .fonm_jia{
       width: 500px;
       height: 550px;
       margin: 100px auto;
       background: white;
       padding: 20px;
       box-shadow: 1px 2px 5px 5px rgba(0, 0, 0, 0.2);
       position: relative;
     }
     .cha{
       width: 30px;height: 30px;
       position: absolute;
       font-size: 30px;
       color: black;
       top: 5px;
       right: 0px;
       transform: rotateZ(45deg);
       cursor: pointer;
     }
     .tu_p{
       width: 50px;height: 50px;
       background: red;
       float: left;
       border-radius: 50%;
       cursor: pointer;
     }
     .content1{
       position: absolute;
       top: 0px;
       left: 0px;
       width:100%;height: 100%;
       background: rgba(0, 0, 0, 0.2);
       display:none;
       z-index: 888888;
     }
     .neikaung{
         width: 500px;
         height: 600px;
         background: white;
         margin:  50px auto;
     }
     </style>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <!-- 插入图片 -->
          <div class="tu_p" >
             <!-- <img src="../../../网页布局/咪咕/img/20181024173427341213.jpg" alt=""> -->
          </div>
          {{each cookies1}}
          <a style="margin-left: 4px; color: white; "  class="navbar-brand" id="xinxi" href="#">
           {{$value}}
          </a>
          {{/each}}
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#" style="padding-top: 0px; padding-bottom:0px; ">
                    <input class="btn btn-default" type="submit" id="chazhao" value="查找" style="padding:0px 14px;height: 30px;margin-top: 10px;">
             <!-- 查抄 -->
            </a></li>
            <li><a href="#" style="padding-top: 0px; padding-bottom:0px; ">
                    <input id="add_zeng" class="btn btn-default" type="submit" value="添加" style="padding:0px 14px;height: 30px;margin-top: 10px;">
            </a></li>
            <li><a href="#">Profile</a></li>
            <li><a href="#">Help</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" id="chazhaoming" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </nav>

    <div class="container-fluid" style="margin-top: 70px;">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar" style="float: left; border-right: 1px solid rgba(0, 0, 0,0.5)">
          <ul class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
            <li><a href="#">Reports</a></li>
            <li><a href="#">Analytics</a></li>
            <li><a href="#">Export</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="">Nav item</a></li>
            <li><a href="">Nav item again</a></li>
            <li><a href="">One more nav</a></li>
            <li><a href="">Another nav item</a></li>
            <li><a href="">More navigation</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="">Nav item again</a></li>
            <li><a href="">One more nav</a></li>
            <li><a href="">Another nav item</a></li>
          </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" style="float: left; margin-left: 0px;">
          <h2 class="sub-header">Section title</h2>
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>姓名</th>
                  <th>性别</th>
                  <th>年龄</th>
                  <th>地址</th>
                  <th>删除</th>
                </tr>
              </thead>
              <tbody>
                <!-- <tr>
                  <td>1,001</td>
                  <td>Lorem</td>
                  <td>ipsum</td>
                  <td>dolor</td>
                  <td>sit</td>
                </tr> -->
                {{each list}}
                 <tr>
                  <td >{{$value._id}}</td>
                  <td id="getid">{{$value.name}}</td>
                  <td>{{$value.sex}}</td>
                  <td>{{$value.age}}</td>
                  <td>{{$value.adress}}</td>
                  <td style="padding: 5px;">
                    <!-- <a href="http://localhost:3000/del?_id={{$value.name}}">
                     <input type="submit" value="删除" >
                    </a> -->
                    <input type="button" value="删除" id="btn" class="btn1" toforId="{{$value.toforId}}"/>
                  </td>
                 </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="content" >
        <!-- <form class="fonm_jia" action="http://localhost:3000/add" method="POST"> -->
          <div class="fonm_jia">
          <div class="cha">+</div>
            <div class="form-group">
              <label for="exampleInputEmail1">姓名</label>
              <input type="text" class="form-control" id="exampleInputname" placeholder="姓名" name="name">
            </div>
            <div class="form-group">
              <label for="exampleInputPassword1">性别</label>
              <input type="text" class="form-control" id="exampleInputsex" placeholder="性别" name="sex">
            </div>
            <div class="form-group">
              <label for="exampleInputPassword1">年纪</label>
              <input type="text" class="form-control" id="exampleInputage" placeholder="年纪" name="age">
            </div>
            <div class="form-group">
              <label for="exampleInputPassword1">地址</label>
              <input type="text" class="form-control" id="exampleInputadress" placeholder="地址" name="adress">
            </div>
            <div class="form-group">
              <label for="exampleInputFile">File input</label>
              <input type="file" id="exampleInputFile">
              <p class="help-block">Example block-level help text here.</p>
            </div>
            <button id="tijiao"  class="btn btn-default">
              提交
            </button>
          <!-- </form> -->
        </div>
    </div>
    <script>
        $("#add_zeng").click(()=>{
          $(".content").css("display","block")
        })
        $(".cha").click(()=>{
          $(".content").css("display","none")
        })

        // 删除的ajax
        $(".btn1").click(function(){
          var toforId = $(this).attr("toforId")
            $.ajax({
                url: "http://localhost:3000/del",
                dataType: "json",
                type: "post",
                async: false,
                timeout: 2000,
                data: {
                  toforId:toforId,
                  sanchu:1
                }
              }).done((res)=>{
                console.log(res)
                if(res.status==1){
                  alert("删除成功")
                  window.location.href="find"
                }
              })
            
          })

          //提交增加的ajax
        $("#tijiao").click(function(){
          var name = $("#exampleInputname").val()
          var sex = $("#exampleInputsex").val()
          var age = $("#exampleInputage").val()
          var adress = $("#exampleInputadress").val()
            $.ajax({
                url: "http://localhost:3000/add",
                dataType: "json",
                type: "post",
                async: false,
                timeout: 2000,
                data: {
                  name,
                  sex,
                  age,
                  adress,
                  zengjai:1
                }
              }).done((res)=>{
                console.log(res)
                if(res.status==1){
                  alert("添加成功")
                  window.location.href="find"
                }
              })
            
          })
          //获取用户信息
        $(".navbar-header").click(function(){
          var username = $(".navbar-brand").html()
          $.ajax({
                url: "http://localhost:3000/findHu",
                dataType: "json",
                type: "post",
                async: false,
                timeout: 2000,
                data: {
                  username:username
                }
            }).done((res)=>{
                  window.location.href="findHu"
              })
        })
         
        //查找姓名
        $("#chazhao").click(function(){
          var xingming = $("#chazhaoming").val();
          $.ajax({
                url: "http://localhost:3000/chazhao",
                dataType: "json",
                type: "post",
                async: false,
                timeout: 2000,
                data: {
                  name:xingming
                }
            }).done((res)=>{
              if(res.status == 1){
                alert("查询成功")
                window.location.href=`chazhao?name=`+xingming
              }else{
                alert("没有该用户")
              }
              })
        })
    </script>
  </body>
</html>
